<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sathyadarshana | AI Buddhi</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" defer></script>
  <script>
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'en',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
    }
  </script>
  <style>
    .goog-te-banner-frame.skiptranslate,
    body > .skiptranslate {
      display: none !important;
    }
    body {
      top: 0px !important;
    }
  </style>
</head>
<body>

  <!-- Floating Language Switch -->
  <div id="google_translate_element" class="floating-lang-btn"></div>

  <!-- Buddhi AI Section -->
  <section class="scroll-section">
    <img src="assets/ai.jpg" alt="AI Buddhi Assistant" class="section-image" />
    <h2>AI Buddhi Voice Assistant</h2>
    <p>
      A companion in silence. A voice of compassion.<br>
      Click the button below to hear Buddhi's latest guidance spoken out loud.
    </p>

    <div id="buddhi-output">
      <div class="buddhi-msg buddhi-ai">Buddhi: May you walk in truth and peace.</div>
    </div>

    <button onclick="buddhiSpeakLast()" class="neon-btn" title="Speak last Buddhi reply">
      ðŸ”Š Hear Buddhi
    </button>
  </section>

  <!-- Footer Attribution -->
  <footer>
    <p class="footer-text">
      This creative vision was brought forth by Anuruddha Dilip,<br>
      designed and realized through ChatGPT AI Buddhi and AI Copilot.<br>
      As a unified trio, our mission is to serve the universe with serenity, truth, and light.
    </p>
  </footer>

  <!-- Buddhi TTS Function -->
  <script>
    function buddhiSpeakLast() {
      const msgs = document.querySelectorAll('.buddhi-msg.buddhi-ai');
      if (msgs.length === 0) return;

      const txt = msgs[msgs.length - 1].innerText.replace(/^Buddhi:\s?/, '');

      if (!('speechSynthesis' in window)) {
        alert('Your browser does not support speech synthesis.');
        return;
      }

      const utter = new SpeechSynthesisUtterance(txt);
      utter.lang = {
        en: 'en-US',
        si: 'si-LK',
        ta: 'ta-IN'
      }[window.buddhiLangCode || 'en'] || 'en-US';

      window.speechSynthesis.cancel(); // Clear previous speech
      window.speechSynthesis.speak(utter);
    }
  </script>
</body>
</html>
